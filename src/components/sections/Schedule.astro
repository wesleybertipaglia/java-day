---
import Container from "../Container.astro";
import ScheduleItem from "../ScheduleItem.astro";
import schedule from "../../data/schedule";

const parseTime = (time: string): Date => {
    const [hours, minutes] = time.split(":").map(Number);
    const date = new Date();
    date.setHours(hours, minutes, 0, 0);
    return date;
};

const sortedSchedule = schedule
    .map((item) => ({ ...item, parsedTime: parseTime(item.time) }))
    .sort(
        (a, b) =>
            (a.parsedTime as Date).getTime() - (b.parsedTime as Date).getTime(),
    );
---

<section id="agenda">
    <Container class="container flex flex-col gap-6 px-6 py-16">
        <div class="flex flex-col">
            <h2 class="text-2xl">Agenda</h2>
            <p class="text-gray-500">Fique por dentro da nossa programação.</p>
        </div>

        <div class="flex flex-col">
            {
                sortedSchedule.map((item) => (
                    <ScheduleItem {...item} time={item.time} />
                ))
            }
        </div>
    </Container>
</section>
